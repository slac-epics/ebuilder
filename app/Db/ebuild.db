#
# Macros:
#    NAME - The event builder record name.
#    INPA to INPU - The input records.
#    NOA to NOU - The size of each input record.
#    NOVA - The total size of the output record (sum of NOA to NOU).
#    FLNK - The optional next record to process.
#
# A and B inputs are manditory, the others are optional.  All of the
# inputs must be properly timestamped.
#
# The INP? fields must be *local* database links.  You can use an ai 
# record with TSE = -2 to get a local record that copies any CA link
# and its timestamp.
#
# This is a passive record, and must be processed whenever an input
# changes.
#

record(aSub, "$(NAME)")
{
    field(INAM, "eventBuildInit")
    field(SNAM, "eventBuild")
    field(SCAN, "Passive")
    field(EFLG, "ON CHANGE")
    field(TSE,  "-2")
    field(INPA, "$(INPA)")
    field(FTA,  "DOUBLE")
    field(NOA,  "$(NOA)")
    field(INPB, "$(INPB)")
    field(FTB,  "DOUBLE")
    field(NOB,  "$(NOB)")
    field(INPC, "$(INPC=)")
    field(FTC,  "DOUBLE")
    field(NOC,  "$(NOC=0)")
    field(INPD, "$(INPD=)")
    field(FTD,  "DOUBLE")
    field(NOD,  "$(NOD=0)")
    field(INPE, "$(INPE=)")
    field(FTE,  "DOUBLE")
    field(NOE,  "$(NOE=0)")
    field(INPF, "$(INPF=)")
    field(FTF,  "DOUBLE")
    field(NOF,  "$(NOF=0)")
    field(INPG, "$(INPG=)")
    field(FTG,  "DOUBLE")
    field(NOG,  "$(NOG=0)")
    field(INPH, "$(INPH=)")
    field(FTH,  "DOUBLE")
    field(NOH,  "$(NOH=0)")
    field(INPI, "$(INPI=)")
    field(FTI,  "DOUBLE")
    field(NOI,  "$(NOI=0)")
    field(INPJ, "$(INPJ=)")
    field(FTJ,  "DOUBLE")
    field(NOJ,  "$(NOJ=0)")
    field(INPK, "$(INPK=)")
    field(FTK,  "DOUBLE")
    field(NOK,  "$(NOK=0)")
    field(INPL, "$(INPL=)")
    field(FTL,  "DOUBLE")
    field(NOL,  "$(NOL=0)")
    field(INPM, "$(INPM=)")
    field(FTM,  "DOUBLE")
    field(NOM,  "$(NOM=0)")
    field(INPN, "$(INPN=)")
    field(FTN,  "DOUBLE")
    field(NON,  "$(NON=0)")
    field(INPO, "$(INPO=)")
    field(FTO,  "DOUBLE")
    field(NOO,  "$(NOO=0)")
    field(INPP, "$(INPP=)")
    field(FTP,  "DOUBLE")
    field(NOP,  "$(NOP=0)")
    field(INPQ, "$(INPQ=)")
    field(FTQ,  "DOUBLE")
    field(NOQ,  "$(NOQ=0)")
    field(INPR, "$(INPR=)")
    field(FTR,  "DOUBLE")
    field(NOR,  "$(NOR=0)")
    field(INPS, "$(INPS=)")
    field(FTS,  "DOUBLE")
    field(NOS,  "$(NOS=0)")
    field(INPT, "$(INPT=)")
    field(FTT,  "DOUBLE")
    field(NOT,  "$(NOT=0)")
    field(INPU, "$(INPU=)")
    field(FTU,  "DOUBLE")
    field(NOU,  "$(NOU=0)")
    field(FTVA, "DOUBLE")
    field(NOVA, "$(NOVA)")
    field(FLNK, "$(FLNK=)")
}

record(waveform, $(NAME):DESC)
{
    field(FTVL, "CHAR")
    field(NELM, "2048")
}

record(waveform, $(NAME):EMPTY:DESC)
{
    field(FTVL, "CHAR")
    field(NELM, "1")
    field(VAL, 0)
}

record(aSub, "$(NAME):MAKE_DESC")
{
    field(SNAM, "descBuild")
    field(SCAN, "Passive")
    field(EFLG, "ON CHANGE")
    field(INPA, "$(INPA):DESC CPP NMS")
    field(FTA,  "CHAR")
    field(NOA,  "2048")
    field(INPB, "$(INPB):DESC CPP NMS")
    field(FTB,  "CHAR")
    field(NOB,  "2048")
    field(INPC, "$(INPC=$(NAME):EMPTY):DESC CPP NMS")
    field(FTC,  "CHAR")
    field(NOC,  "2048")
    field(INPD, "$(INPD=$(NAME):EMPTY):DESC CPP NMS")
    field(FTD,  "CHAR")
    field(NOD,  "2048")
    field(INPE, "$(INPE=$(NAME):EMPTY):DESC CPP NMS")
    field(FTE,  "CHAR")
    field(NOE,  "2048")
    field(INPF, "$(INPF=$(NAME):EMPTY):DESC CPP NMS")
    field(FTF,  "CHAR")
    field(NOF,  "2048")
    field(INPG, "$(INPG=$(NAME):EMPTY):DESC CPP NMS")
    field(FTG,  "CHAR")
    field(NOG,  "2048")
    field(INPH, "$(INPH=$(NAME):EMPTY):DESC CPP NMS")
    field(FTH,  "CHAR")
    field(NOH,  "2048")
    field(INPI, "$(INPI=$(NAME):EMPTY):DESC CPP NMS")
    field(FTI,  "CHAR")
    field(NOI,  "2048")
    field(INPJ, "$(INPJ=$(NAME):EMPTY):DESC CPP NMS")
    field(FTJ,  "CHAR")
    field(NOJ,  "2048")
    field(INPK, "$(INPK=$(NAME):EMPTY):DESC CPP NMS")
    field(FTK,  "CHAR")
    field(NOK,  "2048")
    field(INPL, "$(INPL=$(NAME):EMPTY):DESC CPP NMS")
    field(FTL,  "CHAR")
    field(NOL,  "2048")
    field(INPM, "$(INPM=$(NAME):EMPTY):DESC CPP NMS")
    field(FTM,  "CHAR")
    field(NOM,  "2048")
    field(INPN, "$(INPN=$(NAME):EMPTY):DESC CPP NMS")
    field(FTN,  "CHAR")
    field(NON,  "2048")
    field(INPO, "$(INPO=$(NAME):EMPTY):DESC CPP NMS")
    field(FTO,  "CHAR")
    field(NOO,  "2048")
    field(INPP, "$(INPP=$(NAME):EMPTY):DESC CPP NMS")
    field(FTP,  "CHAR")
    field(NOP,  "2048")
    field(INPQ, "$(INPQ=$(NAME):EMPTY):DESC CPP NMS")
    field(FTQ,  "CHAR")
    field(NOQ,  "2048")
    field(INPR, "$(INPR=$(NAME):EMPTY):DESC CPP NMS")
    field(FTR,  "CHAR")
    field(NOR,  "2048")
    field(INPS, "$(INPS=$(NAME):EMPTY):DESC CPP NMS")
    field(FTS,  "CHAR")
    field(NOS,  "2048")
    field(INPT, "$(INPT=$(NAME):EMPTY):DESC CPP NMS")
    field(FTT,  "CHAR")
    field(NOT,  "2048")
    field(INPU, "$(INPU=$(NAME):EMPTY):DESC CPP NMS")
    field(FTU,  "CHAR")
    field(NOU,  "2048")
    field(OUTA, "$(NAME):DESC PP NMS")
    field(FTVA, "CHAR")
    field(NOVA, "2048")
}
